Last updated: 2026-01-17

# Development Status

## 現在のIssues
- 現在、外部プロジェクト`wavlpf`からの利用を待機しつつ、連携に必要な機能の特定と監視が進行中 ([Issue #162](../issue-notes/162.md))。
- 直近では、周波数推定の安定性向上（例: 1xと2x間の周波数オシレーション修正）と関連するテストが完了し、`FREQUENCY_STABILITY_FIX.md`が追加された。
- 今後の機能として、位相を揃える際の基準点を、ゼロクロス検出ではなくピーク検出に切り替える機能の実装検討がある ([Issue #62](../issue-notes/62.md))。

## 次の一手候補
1. `wavlpf`との連携を見据えたAPI要件の確認と課題特定 ([Issue #162](../issue-notes/162.md))
   - 最初の小さな一歩: `wavlpf`プロジェクトの公開されている最新のAPI仕様や利用例を調査し、`cat-oscilloscope`から提供すべきデータ形式や関数を概観する。
   - Agent実行プロンプト:
     ```
     対象ファイル: `wavlpf`の公開されているドキュメントやリポジトリ（例: `wavlpf/src/main.rs`のような主要なインタフェースファイル、もしアクセス可能であれば）

     実行内容: `wavlpf`がオーディオデータ処理に関してどのような入力/出力形式を期待しているか、またどのような機能を必要としているかを分析し、`cat-oscilloscope`の既存機能とのギャップを特定してください。特に、リアルタイム処理や特定のデータ構造に関する要件に焦点を当ててください。

     確認事項: `wavlpf`が現在開発中の状態であることを考慮し、現時点での暫定的な情報に基づいて分析を行ってください。将来的な変更の可能性も念頭に置いてください。

     期待する出力: `wavlpf`が`cat-oscilloscope`の機能を活用するために必要となるであろうAPI要件、データ形式、および既存の`cat-oscilloscope`のコードベースで対応が必要な変更点（例: 新規関数、データ変換レイヤー）をMarkdown形式で列挙してください。
     ```

2. 位相表示の基準点をピーク検出に切り替える機能の実装検討 ([Issue #62](../issue-notes/62.md))
   - 最初の小さな一歩: 既存のゼロクロス検出ロジック (`wasm-processor/src/zero_cross_detector.rs`や`src/ZeroCrossDetector.ts`) をレビューし、同様のアプローチでピーク検出アルゴリズムをRustで実装する際の課題と実現可能性を調査する。
   - Agent実行プロンプト:
     ```
     対象ファイル: `wasm-processor/src/zero_cross_detector.rs`, `src/ZeroCrossDetector.ts`, `src/Oscilloscope.ts`

     実行内容: ゼロクロス検出のロジックを参考に、オーディオ波形データからピーク（最大値または最小値）を効率的に検出するアルゴリズムの実装方針を検討してください。特に、ノイズに対するロバスト性や計算コスト、および既存の`cat-oscilloscope`の描画サイクルに組み込む際の適合性について評価してください。

     確認事項: ピーク検出が単一の周波数成分だけでなく、複雑な倍音構造を持つ波形に対しても有効であるか、また検出されたピーク位置が位相表示の基準として適切であるかを確認してください。

     期待する出力: ピーク検出アルゴリズムの主要な候補（例: 微分、移動平均フィルタとの組み合わせなど）、それぞれのメリット・デメリット、および`wasm-processor`に実装するための具体的な手順案をMarkdown形式で提案してください。
     ```

3. 周波数推定器の精度とロバスト性向上のための追加検討 (関連: [Issue #167](../issue-notes/167.md) での修正の深化)
   - 最初の小さな一歩: `wasm-processor/src/frequency_estimator.rs`と、そのテストコード (`src/__tests__/algorithms.test.ts`や最近追加された`src/__tests__/alignment-mode.test.ts`) を詳細にレビューし、現在の周波数推定が特定のエッジケース（例: 極端なノイズ、短時間の無音区間、急激な周波数変化）でどのように振る舞うかを把握する。
   - Agent実行プロンプト:
     ```
     対象ファイル: `wasm-processor/src/frequency_estimator.rs`, `src/__tests__/algorithms.test.ts`, `src/__tests__/alignment-mode.test.ts`

     実行内容: 現在の周波数推定アルゴリズムについて、特にノイズが多い環境や周波数が急激に変化する状況での精度と安定性を向上させるための改善点を分析してください。既存のテストケースではカバーされていないエッジケースを特定し、それらに対応するためのアルゴリズムの調整案を提案してください。

     確認事項: 提案する改善策が、既存の安定性向上機能（履歴ベースの安定化など）とどのように連携するか、また計算資源の増加が許容範囲内であるかを確認してください。

     期待する出力: 周波数推定器の具体的な改善案（例: 複数の推定方法の統合、適応的なフィルタリング、自信度スコアの導入）、それらの技術的な詳細、および改善を検証するための新たなテストケースのアイデアをMarkdown形式で記述してください。
     ```

---
Generated at: 2026-01-17 07:09:13 JST
