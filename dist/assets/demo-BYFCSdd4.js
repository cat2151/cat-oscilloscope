import"./modulepreload-polyfill-B5Qt9EMX.js";import{Oscilloscope as y,BufferSource as E}from"https://cdn.jsdelivr.net/gh/cat2151/cat-oscilloscope@main/dist/cat-oscilloscope.mjs";const g=document.getElementById("oscilloscope"),r=document.getElementById("startBtn"),u=document.getElementById("stopBtn"),l=document.getElementById("status"),f=document.getElementById("frequency"),m=document.getElementById("gain"),h=document.querySelectorAll('input[name="waveform"]'),s=document.createElement("canvas");s.width=250;s.height=120;const c=new y(g,s,s,s,s);c.setDebugOverlaysEnabled(!1);let i=null;function p(){i=setInterval(()=>{const e=c.getEstimatedFrequency();f.textContent=e>0?`${e.toFixed(1)} Hz`:"--- Hz";const n=c.getCurrentGain();m.textContent=`${n.toFixed(2)}x`},100)}function v(){i&&(clearInterval(i),i=null),f.textContent="--- Hz",m.textContent="---x"}function b(e,n=44100,d=1){const o=new Float32Array(n*d),a=o.length;switch(e){case"440":for(let t=0;t<a;t++)o[t]=Math.sin(2*Math.PI*440*t/n);break;case"880":for(let t=0;t<a;t++)o[t]=Math.sin(2*Math.PI*880*t/n);break;case"220":for(let t=0;t<a;t++)o[t]=Math.sin(2*Math.PI*220*t/n);break;case"complex":for(let t=0;t<a;t++)o[t]=.5*Math.sin(2*Math.PI*440*t/n)+.3*Math.sin(2*Math.PI*880*t/n);break}return o}r.addEventListener("click",async()=>{try{r.disabled=!0,l.textContent="初期化中...";const e=document.querySelector('input[name="waveform"]:checked').value,n=44100,d=b(e,n,1),o=new E(d,n,{loop:!0});await c.startFromBuffer(o),l.textContent="実行中",u.disabled=!1,p(),h.forEach(a=>a.disabled=!0)}catch(e){console.error("Failed to start oscilloscope:",e),l.textContent="エラー",r.disabled=!1}});u.addEventListener("click",async()=>{try{await c.stop(),l.textContent="停止",r.disabled=!1,u.disabled=!0,v(),h.forEach(e=>e.disabled=!1)}catch(e){console.error("Failed to stop oscilloscope:",e)}});
//# sourceMappingURL=demo-BYFCSdd4.js.map
